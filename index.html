<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://maps.googleapis.com https://maps.gstatic.com https://cdn.onesignal.com https://api.onesignal.com https://polyfill.io https://player.vimeo.com https://www.google.com https://www.gstatic.com https://www.google.com/recaptcha/ https://www.gstatic.com/recaptcha/ https://va.vercel-scripts.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: blob: https:; connect-src 'self' https://maps.googleapis.com https://api.supabase.co https://vsvhkkalfziuyttwityc.supabase.co https://onesignal.com https://cdn.onesignal.com https://api.onesignal.com https://polyfill.io wss://vsvhkkalfziuyttwityc.supabase.co wss://*.supabase.co https://*.supabase.co https://*.supabase.com https://va.vercel-scripts.com; frame-src 'self' https://storage.googleapis.com https://www.youtube.com https://youtube.com https://www.youtube-nocookie.com https://player.vimeo.com https://www.google.com https://www.google.com/recaptcha/;">
    
    <!-- Security Headers -->
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=()">
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload">
    
    <!-- Cross-browser compatibility -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="format-detection" content="telephone=no" />
    
    <!-- Browser-specific meta tags -->
    <meta name="msapplication-config" content="none" />
    <meta name="msapplication-TileColor" content="#3D6C56" />
    <meta name="msapplication-TileImage" content="/logo.png" />
    <title>FoodVrse - Rescue Meals</title>
    <meta name="description" content="Good food deserves a second chance - Save food, save money, save the planet" />
    <meta name="author" content="FoodVrse" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />

    <!-- Mobile App Meta -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="FoodVrse">
    
    <!-- Theme colors for mobile -->
    <meta name="theme-color" content="#3D6C56">
    <meta name="msapplication-navbutton-color" content="#3D6C56">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta property="og:title" content="FoodVrse - Rescue Meals" />
    <meta property="og:description" content="Good food deserves a second chance" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://www.foodvrse.com/logo.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@foodvrse" />
    <meta name="twitter:image" content="https://www.foodvrse.com/logo.png" />
    
    <!-- Optimized viewport for small screens -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover, shrink-to-fit=no">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/src/main.tsx" as="script" type="module">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style">
    
    <!-- Critical CSS inline -->
    <style>
      /* Critical CSS for initial render */
      body { margin: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }
      #root { min-height: 100vh; }
      .loading-spinner {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        background: #f9fafb;
      }
      .spinner {
        width: 48px;
        height: 48px;
        border: 4px solid #e5e7eb;
        border-top: 4px solid #3D6C56;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
    
    <!-- OneSignal Push Notifications -->
    <!-- <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script> -->
    <!-- <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(async function(OneSignal) {
        await OneSignal.init({
          appId: "ad9e0988-c4d4-4d1c-8180-5bc8016f97c1",
        });
      });
    </script> -->

    <!-- <script>
      function initGoogleMaps() {
        console.log('üó∫Ô∏è Google Maps JavaScript API loaded successfully');
        window.googleMapsLoaded = true;
      }
    </script> -->
  </head>

  <body>
    <div id="root">
      <!-- Initial loading state -->
      <div class="loading-spinner">
        <div class="spinner"></div>
      </div>
    </div>
    
    <!-- Polyfills for older browsers -->
    <!-- <script src="https://polyfill.io/v3/polyfill.js?features=es2015%2Ces2016%2Ces2017%2Ces2018%2Ces2019%2Ces2020%2Ces2021%2Ces2022%2CIntersectionObserver%2CPromise%2CPromise.prototype.finally%2CObject.assign%2CObject.entries%2CObject.fromEntries%2CObject.values%2CArray.prototype.includes%2CArray.prototype.find%2CArray.prototype.findIndex%2CString.prototype.includes%2CString.prototype.startsWith%2CString.prototype.endsWith%2Cfetch%2CrequestAnimationFrame%2CCustomEvent%2CElement.prototype.matches%2CElement.prototype.closest%2CNodeList.prototype.forEach%2CURLSearchParams%2CResizeObserver%2CAbortController"></script> -->
    
    <!-- Browser compatibility check -->
    <!-- <script>
      // Check for essential browser features
      const requiredFeatures = {
        'ES6': typeof Promise !== 'undefined',
        'Fetch': typeof fetch !== 'undefined',
        'LocalStorage': typeof localStorage !== 'undefined',
        'SessionStorage': typeof sessionStorage !== 'undefined',
        'IntersectionObserver': typeof IntersectionObserver !== 'undefined'
      };
      
      const missingFeatures = Object.entries(requiredFeatures)
        .filter(([_, supported]) => !supported)
        .map(([feature]) => feature);
      
      if (missingFeatures.length > 0) {
        console.warn('Missing browser features:', missingFeatures);
        // Show a warning to users with very old browsers
        if (missingFeatures.includes('ES6') || missingFeatures.includes('Fetch')) {
          document.body.innerHTML = `
            <div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">
              <h2>Browser Not Supported</h2>
              <p>Your browser is missing essential features required to run FoodVrse.</p>
              <p>Please update to a modern browser like Chrome, Firefox, Safari, or Edge.</p>
              <p>Minimum requirements: Chrome 60+, Firefox 60+, Safari 12+, Edge 79+</p>
            </div>
          `;
        }
      }
    </script> -->
    
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Vimeo Player API -->
    <script src="https://player.vimeo.com/api/player.js"></script>
    
    <!-- Google reCAPTCHA -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  </body>
</html>
